<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Data Generation: Mechanisms and Examples</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>
<style type="text/css">detaiks.chunk-details > summary.chunk-summary {
text-align: right;
}
details.chunk-details[open] > summary.chunk-summary::after {
content: "Hide";
}
details.chunk-details[open] > summary.chunk-summary > span.chunk-summary-text {
display: none;
}
</style>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } 
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } 
code span.at { color: #204a87; } 
code span.bn { color: #0000cf; } 
code span.cf { color: #204a87; font-weight: bold; } 
code span.ch { color: #4e9a06; } 
code span.cn { color: #8f5902; } 
code span.co { color: #8f5902; font-style: italic; } 
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } 
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } 
code span.dt { color: #204a87; } 
code span.dv { color: #0000cf; } 
code span.er { color: #a40000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #0000cf; } 
code span.fu { color: #204a87; font-weight: bold; } 
code span.im { } 
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } 
code span.kw { color: #204a87; font-weight: bold; } 
code span.op { color: #ce5c00; font-weight: bold; } 
code span.ot { color: #8f5902; } 
code span.pp { color: #8f5902; font-style: italic; } 
code span.sc { color: #ce5c00; font-weight: bold; } 
code span.ss { color: #4e9a06; } 
code span.st { color: #4e9a06; } 
code span.va { color: #000000; } 
code span.vs { color: #4e9a06; } 
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Data Generation: Mechanisms and
Examples</h1>


<div id="TOC">
<ul>
<li><a href="#what-this-covers" id="toc-what-this-covers">What this
covers</a>
<ul>
<li><a href="#recipe-skeleton" id="toc-recipe-skeleton">Recipe
skeleton</a></li>
</ul></li>
<li><a href="#covariates" id="toc-covariates">Covariates</a></li>
<li><a href="#treatment" id="toc-treatment">Treatment</a></li>
<li><a href="#event-time-engines" id="toc-event-time-engines">Event-time
engines</a></li>
<li><a href="#censoring" id="toc-censoring">Censoring</a></li>
<li><a href="#worked-examples" id="toc-worked-examples">Worked
examples</a>
<ul>
<li><a href="#example-1-aft-lognormal" id="toc-example-1-aft-lognormal">Example 1 — AFT Lognormal</a></li>
<li><a href="#example-2-aft-weibull" id="toc-example-2-aft-weibull">Example 2 — AFT Weibull</a></li>
<li><a href="#example-3-ph-piecewise-exponential-single-segment" id="toc-example-3-ph-piecewise-exponential-single-segment">Example 3 —
PH piecewise exponential (single segment)</a></li>
<li><a href="#example-4-ph-piecewise-exponential-multi-segment" id="toc-example-4-ph-piecewise-exponential-multi-segment">Example 4 — PH
piecewise exponential (multi-segment)</a></li>
</ul></li>
<li><a href="#batch-generation-with-metadata" id="toc-batch-generation-with-metadata">Batch generation with
metadata</a></li>
<li><a href="#reproducibility-tips" id="toc-reproducibility-tips">Reproducibility tips</a></li>
</ul>
</div>

<div id="what-this-covers" class="section level1">
<h1>What this covers</h1>
<p>We show how to construct a <strong>recipe</strong> (covariates →
treatment → event time → censoring), and then simulate datasets with
<code>simulate_from_recipe()</code>. We also show batch generation
(<code>generate_recipe_sets()</code>) and how to read compact metadata
back (<code>load_recipe_sets()</code>), without any platform-specific
tricks.</p>
<p>The simulator takes a plain <strong>list</strong> as the recipe. No
YAML is required.</p>
<div id="recipe-skeleton" class="section level2">
<h2>Recipe skeleton</h2>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">list</span>(</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">300</span>,</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>  <span class="at">covariates =</span> <span class="fu">list</span>(<span class="at">defs =</span> <span class="fu">list</span>(<span class="sc">/</span><span class="er">*</span> see Covariates <span class="sc">*</span><span class="er">/</span>)),</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  <span class="at">treatment  =</span> <span class="fu">list</span>(<span class="sc">/</span><span class="er">*</span> see Treatment <span class="sc">*</span><span class="er">/</span>),</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="at">event_time =</span> <span class="fu">list</span>(<span class="sc">/</span><span class="er">*</span> see Event<span class="sc">-</span>time engines <span class="sc">*</span><span class="er">/</span>),</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>  <span class="at">censoring  =</span> <span class="fu">list</span>(<span class="sc">/</span><span class="er">*</span> see Censoring <span class="sc">*</span><span class="er">/</span>),</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">42</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>)</span></code></pre></div>
</details>
<hr />
</div>
</div>
<div id="covariates" class="section level1">
<h1>Covariates</h1>
<p>Each covariate has a <code>name</code>, <code>type</code>
(<code>&quot;continuous&quot;</code> or <code>&quot;categorical&quot;</code>), a
<code>dist</code> with <code>params</code>, and optional
<code>transform</code> steps applied after generation
(<code>&quot;center(a)&quot;</code>, <code>&quot;scale(b)&quot;</code>).</p>
<p><strong>Available distributions</strong></p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th><code>dist</code> (string)</th>
<th>Parameters</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>continuous</td>
<td><code>normal</code></td>
<td><code>mean</code>, <code>sd</code></td>
</tr>
<tr class="even">
<td>continuous</td>
<td><code>lognormal</code></td>
<td><code>meanlog</code>, <code>sdlog</code></td>
</tr>
<tr class="odd">
<td>continuous</td>
<td><code>gamma</code></td>
<td><code>shape</code>, <code>scale</code></td>
</tr>
<tr class="even">
<td>continuous</td>
<td><code>weibull</code></td>
<td><code>shape</code>, <code>scale</code></td>
</tr>
<tr class="odd">
<td>continuous</td>
<td><code>uniform</code></td>
<td><code>min</code>, <code>max</code></td>
</tr>
<tr class="even">
<td>continuous</td>
<td><code>beta</code></td>
<td><code>shape1</code>, <code>shape2</code></td>
</tr>
<tr class="odd">
<td>continuous</td>
<td><code>t</code></td>
<td><code>df</code></td>
</tr>
<tr class="even">
<td>categorical</td>
<td><code>bernoulli</code></td>
<td><code>p</code> (probability of 1)</td>
</tr>
<tr class="odd">
<td>categorical</td>
<td><code>categorical</code></td>
<td><code>prob = c(...)</code>, <code>labels = c(...)</code>
(optional)</td>
</tr>
<tr class="even">
<td>categorical</td>
<td><code>ordinal</code></td>
<td><code>prob = c(...)</code>, <code>labels = c(...)</code> (optional,
ordered)</td>
</tr>
</tbody>
</table>
<p><strong>Example: define covariates</strong></p>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>covs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;age&quot;</span>,   <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>,  <span class="at">dist=</span><span class="st">&quot;normal&quot;</span>,     <span class="at">params=</span><span class="fu">list</span>(<span class="at">mean=</span><span class="dv">62</span>, <span class="at">sd=</span><span class="dv">10</span>),</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>       <span class="at">transform=</span><span class="fu">c</span>(<span class="st">&quot;center(60)&quot;</span>,<span class="st">&quot;scale(10)&quot;</span>)),</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;sex&quot;</span>,   <span class="at">type=</span><span class="st">&quot;categorical&quot;</span>, <span class="at">dist=</span><span class="st">&quot;bernoulli&quot;</span>,  <span class="at">params=</span><span class="fu">list</span>(<span class="at">p=</span><span class="fl">0.45</span>)),</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;stage&quot;</span>, <span class="at">type=</span><span class="st">&quot;categororical&quot;</span>, <span class="at">dist=</span><span class="st">&quot;ordinal&quot;</span>,</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>       <span class="at">params=</span><span class="fu">list</span>(<span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.3</span>,<span class="fl">0.5</span>,<span class="fl">0.2</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;I&quot;</span>,<span class="st">&quot;II&quot;</span>,<span class="st">&quot;III&quot;</span>))),</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;x&quot;</span>,     <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>,  <span class="at">dist=</span><span class="st">&quot;lognormal&quot;</span>,  <span class="at">params=</span><span class="fu">list</span>(<span class="at">meanlog=</span><span class="dv">0</span>, <span class="at">sdlog=</span><span class="fl">0.6</span>))</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>)</span></code></pre></div>
</details>
<hr />
</div>
<div id="treatment" class="section level1">
<h1>Treatment</h1>
<p>Choose one <code>assignment</code>:</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Assignment</th>
<th>Key fields</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&quot;randomization&quot;</code></td>
<td><code>allocation = &quot;a:b&quot;</code></td>
<td>Bernoulli with probability <span class="math inline">\(p_1 =
a/(a+b)\)</span>.</td>
</tr>
<tr class="even">
<td><code>&quot;stratified&quot;</code></td>
<td><code>allocation</code>, <code>stratify_by = c(&quot;...&quot;)</code></td>
<td>Same allocation <strong>within</strong> each stratum defined by
listed <strong>categorical</strong> covariates.</td>
</tr>
<tr class="odd">
<td><code>&quot;logistic_ps&quot;</code></td>
<td><code>ps_model = list(formula = &quot;~ ...&quot;, beta = c(...))</code></td>
<td>Treatment probability is <span class="math inline">\(\mathrm{logit}^{-1}(\eta)\)</span> from user
model. Provide explicit <code>beta</code> to avoid parsing
edge-cases.</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong></p>
<p>Randomization:</p>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>tr_rand <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">assignment=</span><span class="st">&quot;randomization&quot;</span>, <span class="at">allocation=</span><span class="st">&quot;1:1&quot;</span>)</span></code></pre></div>
</details>
<p>Stratified by <code>&quot;stage&quot;</code>:</p>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>tr_strat <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">assignment=</span><span class="st">&quot;stratified&quot;</span>, <span class="at">allocation=</span><span class="st">&quot;2:1&quot;</span>, <span class="at">stratify_by=</span><span class="fu">c</span>(<span class="st">&quot;stage&quot;</span>))</span></code></pre></div>
</details>
<p>Logistic propensity:</p>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>tr_ps <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="at">assignment =</span> <span class="st">&quot;logistic_ps&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">ps_model  =</span> <span class="fu">list</span>(</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="at">formula =</span> <span class="st">&quot;~ 1 + x + sex&quot;</span>,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>    <span class="at">beta    =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.3</span>, <span class="fl">1.2</span>, <span class="sc">-</span><span class="fl">0.6</span>)  <span class="co"># (Intercept), x, sex</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  )</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>)</span></code></pre></div>
</details>
<hr />
</div>
<div id="event-time-engines" class="section level1">
<h1>Event-time engines</h1>
<p>Let <span class="math inline">\(Z\)</span> be treatment (0/1), <span class="math inline">\(X\)</span> be covariates, and <span class="math inline">\(\eta\)</span> be the <strong>linear
predictor</strong> (defined in <code>effects</code>, below). Supported
engines and <strong>baseline</strong> parameterizations:</p>
<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th>Model (user-facing)</th>
<th><code>model</code> value</th>
<th>Baseline parameters</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AFT Lognormal</td>
<td><code>&quot;aft_lognormal&quot;</code></td>
<td><code>mu</code>, <code>sigma</code></td>
<td><span class="math inline">\(\log T = \mu + \eta + \sigma
\varepsilon\)</span>, <span class="math inline">\(\varepsilon \sim
\mathcal{N}(0,1)\)</span>.</td>
</tr>
<tr class="even">
<td>AFT Weibull</td>
<td><code>&quot;aft_weibull&quot;</code></td>
<td><code>shape</code>, <code>scale</code></td>
<td><span class="math inline">\(S_0(t) = \exp(-(t/\lambda)^k)\)</span>;
AFT shift via <span class="math inline">\(\eta\)</span>.</td>
</tr>
<tr class="odd">
<td>AFT Log-Logistic</td>
<td><code>&quot;aft_loglogistic&quot;</code></td>
<td><code>shape</code>, <code>scale</code></td>
<td><span class="math inline">\(T = \lambda \exp(\eta)
(U/(1-U))^{1/k}\)</span>.</td>
</tr>
<tr class="even">
<td>PH Exponential</td>
<td><code>&quot;ph_pwexp&quot;</code></td>
<td><code>rates = c(λ)</code>, <code>cuts = numeric(0)</code></td>
<td>Piecewise-Exp with a <strong>single</strong> segment is
exponential.</td>
</tr>
<tr class="odd">
<td>PH Weibull</td>
<td><code>&quot;ph_weibull&quot;</code></td>
<td><code>shape</code>, <code>scale</code></td>
<td>Proportional hazards with Weibull baseline.</td>
</tr>
<tr class="even">
<td>PH Gompertz</td>
<td><code>&quot;ph_gompertz&quot;</code></td>
<td><code>rate</code>, <code>gamma</code></td>
<td>Hazard <span class="math inline">\(h(t) = a \exp(bt)\)</span>.</td>
</tr>
<tr class="odd">
<td>PH Piecewise Exponential</td>
<td><code>&quot;ph_pwexp&quot;</code></td>
<td><code>rates = c(r1,r2,...)</code>,
<code>cuts = c(c1,c2,...)</code></td>
<td>Rate in segment <span class="math inline">\(s\)</span> is <span class="math inline">\(r_s \exp(\eta)\)</span>.</td>
</tr>
</tbody>
</table>
<p><strong>Effects and linear predictor</strong></p>
<p>Specify effects on the appropriate scale (AFT: log-time; PH:
log-hazard):</p>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>effects <span class="ot">=</span> <span class="fu">list</span>(</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="at">intercept  =</span> <span class="dv">0</span>,                      <span class="co"># default is 0</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="at">treatment  =</span> <span class="sc">-</span><span class="fl">0.25</span>,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="at">covariates =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="fl">0.01</span>, <span class="at">sex =</span> <span class="sc">-</span><span class="fl">0.2</span>)  <span class="co"># </span><span class="al">NOTE</span><span class="co">: named LIST</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>  <span class="co"># or: formula=&quot;~ age + sex&quot;, beta=c(0.01, -0.2)</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>)</span></code></pre></div>
</details>
<blockquote>
<p><code>effects$covariates</code> must be a <strong>named list</strong>
of numerics (e.g., <code>list(age=0.01)</code>), not a named vector
created with <code>c()</code>.</p>
</blockquote>
<hr />
</div>
<div id="censoring" class="section level1">
<h1>Censoring</h1>
<p>Two modes are supported:</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th>Mode</th>
<th>Fields</th>
<th>Semantics</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&quot;target_overall&quot;</code></td>
<td><code>target</code>, <code>admin_time</code></td>
<td>Solver finds an exponential random-censoring rate <span class="math inline">\(\lambda_c\)</span> so that overall censoring
fraction <span class="math inline">\(\approx\)</span>
<code>target</code>, subject to any administrative floor at
<code>admin_time</code>.</td>
</tr>
<tr class="even">
<td><code>&quot;explicit&quot;</code></td>
<td>Any of: <code>administrative = list(time=...)</code>;
<code>random = list(dist=&quot;exponential&quot;, params=list(rate=...))</code>;
<code>dependent = list(formula=&quot;~ ...&quot;, base=..., beta=c(...))</code></td>
<td>Compose administrative, random, and covariate-dependent censoring
directly.</td>
</tr>
</tbody>
</table>
<p><strong>Examples</strong></p>
<p>Target overall censoring:</p>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>cz_target <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">mode=</span><span class="st">&quot;target_overall&quot;</span>, <span class="at">target=</span><span class="fl">0.25</span>, <span class="at">admin_time=</span><span class="dv">36</span>)</span></code></pre></div>
</details>
<p>Explicit mix (admin + random):</p>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>cz_explicit <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">&quot;explicit&quot;</span>,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="at">administrative =</span> <span class="fu">list</span>(<span class="at">time =</span> <span class="dv">36</span>),</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="at">random =</span> <span class="fu">list</span>(<span class="at">dist =</span> <span class="st">&quot;exponential&quot;</span>, <span class="at">params =</span> <span class="fu">list</span>(<span class="at">rate =</span> <span class="fl">0.02</span>))</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>)</span></code></pre></div>
</details>
<hr />
</div>
<div id="worked-examples" class="section level1">
<h1>Worked examples</h1>
<p>We now build full recipes and call
<code>simulate_from_recipe()</code>. We report realized censoring via
<code>attr(dat, &quot;achieved_censoring&quot;)</code>.</p>
<div id="example-1-aft-lognormal" class="section level2">
<h2>Example 1 — AFT Lognormal</h2>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>covs1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;age&quot;</span>,   <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>,  <span class="at">dist=</span><span class="st">&quot;normal&quot;</span>,     <span class="at">params=</span><span class="fu">list</span>(<span class="at">mean=</span><span class="dv">62</span>, <span class="at">sd=</span><span class="dv">10</span>),</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>       <span class="at">transform=</span><span class="fu">c</span>(<span class="st">&quot;center(60)&quot;</span>,<span class="st">&quot;scale(10)&quot;</span>)),</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;sex&quot;</span>,   <span class="at">type=</span><span class="st">&quot;categorical&quot;</span>, <span class="at">dist=</span><span class="st">&quot;bernoulli&quot;</span>,  <span class="at">params=</span><span class="fu">list</span>(<span class="at">p=</span><span class="fl">0.45</span>)),</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;stage&quot;</span>, <span class="at">type=</span><span class="st">&quot;categorical&quot;</span>, <span class="at">dist=</span><span class="st">&quot;ordinal&quot;</span>,</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>       <span class="at">params=</span><span class="fu">list</span>(<span class="at">prob=</span><span class="fu">c</span>(<span class="fl">0.3</span>,<span class="fl">0.5</span>,<span class="fl">0.2</span>), <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;I&quot;</span>,<span class="st">&quot;II&quot;</span>,<span class="st">&quot;III&quot;</span>))),</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;x&quot;</span>,     <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>,  <span class="at">dist=</span><span class="st">&quot;lognormal&quot;</span>,  <span class="at">params=</span><span class="fu">list</span>(<span class="at">meanlog=</span><span class="dv">0</span>, <span class="at">sdlog=</span><span class="fl">0.6</span>))</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>rec1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">300</span>,</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>  <span class="at">covariates =</span> <span class="fu">list</span>(<span class="at">defs =</span> covs1),</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>  <span class="at">treatment  =</span> <span class="fu">list</span>(<span class="at">assignment=</span><span class="st">&quot;randomization&quot;</span>, <span class="at">allocation=</span><span class="st">&quot;1:1&quot;</span>),</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>  <span class="at">event_time =</span> <span class="fu">list</span>(<span class="at">model=</span><span class="st">&quot;aft_lognormal&quot;</span>,</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>                    <span class="at">baseline=</span><span class="fu">list</span>(<span class="at">mu=</span><span class="fl">3.0</span>, <span class="at">sigma=</span><span class="fl">0.6</span>),</span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>                    <span class="at">effects=</span><span class="fu">list</span>(<span class="at">intercept=</span><span class="dv">0</span>, <span class="at">treatment=</span><span class="sc">-</span><span class="fl">0.25</span>,</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>                                 <span class="at">covariates=</span><span class="fu">list</span>(<span class="at">age=</span><span class="fl">0.01</span>, <span class="at">sex=</span><span class="sc">-</span><span class="fl">0.2</span>, <span class="at">x=</span><span class="fl">0.05</span>))),</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>  <span class="at">censoring  =</span> <span class="fu">list</span>(<span class="at">mode=</span><span class="st">&quot;target_overall&quot;</span>, <span class="at">target=</span><span class="fl">0.25</span>, <span class="at">admin_time=</span><span class="dv">36</span>),</span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">11</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a>)</span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a>dat1 <span class="ot">&lt;-</span> <span class="fu">simulate_from_recipe</span>(<span class="fu">validate_recipe</span>(rec1))</span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="fu">head</span>(dat1)</span></code></pre></div>
</details>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["time"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["status"],"name":[2],"type":["int"],"align":["right"]},{"label":["arm"],"name":[3],"type":["int"],"align":["right"]},{"label":["age"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["sex"],"name":[5],"type":["int"],"align":["right"]},{"label":["stage"],"name":[6],"type":["ord"],"align":["right"]},{"label":["x"],"name":[7],"type":["dbl"],"align":["right"]}],"data":[{"1":"17.256803","2":"1","3":"0","4":"-0.3910311","5":"0","6":"II","7":"1.2192376","_rn_":"1"},{"1":"19.531621","2":"1","3":"1","4":"0.2265944","5":"1","6":"II","7":"0.6122083","_rn_":"2"},{"1":"11.902048","2":"1","3":"0","4":"-1.3165531","5":"0","6":"III","7":"1.2334828","_rn_":"3"},{"1":"18.770511","2":"1","3":"0","4":"-1.1626533","5":"0","6":"II","7":"0.5784534","_rn_":"4"},{"1":"16.584294","2":"1","3":"1","4":"1.3784892","5":"0","6":"II","7":"0.2619596","_rn_":"5"},{"1":"9.377759","2":"1","3":"1","4":"-0.7341513","5":"0","6":"II","7":"1.1455235","_rn_":"6"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">attr</span>(dat1, <span class="st">&quot;achieved_censoring&quot;</span>)</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.23</span></span></code></pre></div>
</details>
</div>
<div id="example-2-aft-weibull" class="section level2">
<h2>Example 2 — AFT Weibull</h2>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>rec2 <span class="ot">&lt;-</span> rec1</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>rec2<span class="sc">$</span>event_time <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">model=</span><span class="st">&quot;aft_weibull&quot;</span>,</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>                        <span class="at">baseline=</span><span class="fu">list</span>(<span class="at">shape=</span><span class="fl">1.3</span>, <span class="at">scale=</span><span class="dv">12</span>),</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>                        <span class="at">effects=</span><span class="fu">list</span>(<span class="at">intercept=</span><span class="dv">0</span>, <span class="at">treatment=</span><span class="sc">-</span><span class="fl">0.20</span>,</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>                                     <span class="at">covariates=</span><span class="fu">list</span>(<span class="at">age=</span><span class="fl">0.008</span>, <span class="at">x=</span><span class="fl">0.04</span>)))</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>dat2 <span class="ot">&lt;-</span> <span class="fu">simulate_from_recipe</span>(<span class="fu">validate_recipe</span>(rec2), <span class="at">seed=</span><span class="dv">12</span>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="fu">summary</span>(dat2<span class="sc">$</span>time)</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>   Min. <span class="dv">1</span>st Qu.  Median    Mean <span class="dv">3</span>rd Qu.    Max. </span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a> <span class="fl">0.2221</span>  <span class="fl">3.4534</span>  <span class="fl">7.2184</span>  <span class="fl">8.8069</span> <span class="fl">12.1700</span> <span class="fl">36.0000</span> </span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="fu">attr</span>(dat2, <span class="st">&quot;achieved_censoring&quot;</span>)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.2466667</span></span></code></pre></div>
</details>
</div>
<div id="example-3-ph-piecewise-exponential-single-segment" class="section level2">
<h2>Example 3 — PH piecewise exponential (single segment)</h2>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>rec3 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">400</span>,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="at">covariates =</span> <span class="fu">list</span>(<span class="at">defs =</span> covs1),</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>  <span class="at">treatment  =</span> <span class="fu">list</span>(<span class="at">assignment=</span><span class="st">&quot;randomization&quot;</span>, <span class="at">allocation=</span><span class="st">&quot;1:1&quot;</span>),</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>  <span class="at">event_time =</span> <span class="fu">list</span>(<span class="at">model=</span><span class="st">&quot;ph_pwexp&quot;</span>,</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>                    <span class="at">baseline=</span><span class="fu">list</span>(<span class="at">rates=</span><span class="fu">c</span>(<span class="fl">0.05</span>), <span class="at">cuts=</span><span class="fu">numeric</span>(<span class="dv">0</span>)),</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>                    <span class="at">effects=</span><span class="fu">list</span>(<span class="at">intercept=</span><span class="dv">0</span>, <span class="at">treatment=</span><span class="sc">-</span><span class="fl">0.3</span>,</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>                                 <span class="at">covariates=</span><span class="fu">list</span>(<span class="at">age=</span><span class="fl">0.01</span>, <span class="at">x=</span><span class="fl">0.03</span>))),</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>  <span class="at">censoring  =</span> <span class="fu">list</span>(<span class="at">mode=</span><span class="st">&quot;target_overall&quot;</span>, <span class="at">target=</span><span class="fl">0.20</span>, <span class="at">admin_time=</span><span class="dv">30</span>),</span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">13</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>)</span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>dat3 <span class="ot">&lt;-</span> <span class="fu">simulate_from_recipe</span>(<span class="fu">validate_recipe</span>(rec3))</span></code></pre></div>
</details>
<table>
<caption>Example 3 — Summary</caption>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="right">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">n</td>
<td align="right">400.000</td>
</tr>
<tr class="even">
<td align="left">Events</td>
<td align="right">297.000</td>
</tr>
<tr class="odd">
<td align="left">Censoring rate</td>
<td align="right">0.258</td>
</tr>
<tr class="even">
<td align="left">Mean time</td>
<td align="right">16.440</td>
</tr>
<tr class="odd">
<td align="left">Median time</td>
<td align="right">15.130</td>
</tr>
</tbody>
</table>
</div>
<div id="example-4-ph-piecewise-exponential-multi-segment" class="section level2">
<h2>Example 4 — PH piecewise exponential (multi-segment)</h2>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>rec4 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="at">n =</span> <span class="dv">500</span>,</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="at">covariates =</span> <span class="fu">list</span>(<span class="at">defs =</span> <span class="fu">list</span>(</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;age&quot;</span>, <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>,  <span class="at">dist=</span><span class="st">&quot;normal&quot;</span>,    <span class="at">params=</span><span class="fu">list</span>(<span class="at">mean=</span><span class="dv">60</span>, <span class="at">sd=</span><span class="dv">8</span>)),</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;sex&quot;</span>, <span class="at">type=</span><span class="st">&quot;categorical&quot;</span>, <span class="at">dist=</span><span class="st">&quot;bernoulli&quot;</span>, <span class="at">params=</span><span class="fu">list</span>(<span class="at">p=</span><span class="fl">0.5</span>)),</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">name=</span><span class="st">&quot;x&quot;</span>,   <span class="at">type=</span><span class="st">&quot;continuous&quot;</span>,  <span class="at">dist=</span><span class="st">&quot;lognormal&quot;</span>, <span class="at">params=</span><span class="fu">list</span>(<span class="at">meanlog=</span><span class="dv">0</span>, <span class="at">sdlog=</span><span class="fl">0.5</span>))</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>  )),</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>  <span class="at">treatment  =</span> <span class="fu">list</span>(<span class="at">assignment=</span><span class="st">&quot;randomization&quot;</span>, <span class="at">allocation=</span><span class="st">&quot;1:1&quot;</span>),</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>  <span class="at">event_time =</span> <span class="fu">list</span>(<span class="at">model=</span><span class="st">&quot;ph_pwexp&quot;</span>,</span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>                    <span class="at">baseline=</span><span class="fu">list</span>(<span class="at">rates=</span><span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.06</span>, <span class="fl">0.03</span>), <span class="at">cuts=</span><span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">18</span>)),</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>                    <span class="at">effects=</span><span class="fu">list</span>(<span class="at">intercept=</span><span class="dv">0</span>, <span class="at">treatment=</span><span class="sc">-</span><span class="fl">0.4</span>,</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>                                 <span class="at">covariates=</span><span class="fu">list</span>(<span class="at">age=</span><span class="fl">0.01</span>, <span class="at">x=</span><span class="fl">0.03</span>))),</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>  <span class="at">censoring  =</span> <span class="fu">list</span>(<span class="at">mode=</span><span class="st">&quot;target_overall&quot;</span>, <span class="at">target=</span><span class="fl">0.25</span>, <span class="at">admin_time=</span><span class="dv">30</span>)</span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>)</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>dat4 <span class="ot">&lt;-</span> <span class="fu">simulate_from_recipe</span>(<span class="fu">validate_recipe</span>(rec4), <span class="at">seed=</span><span class="dv">123</span>)</span></code></pre></div>
</details>
<table>
<caption>Example 4 — Summary</caption>
<thead>
<tr class="header">
<th align="left">Metric</th>
<th align="left">Metric.1</th>
<th align="right">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">n</td>
<td align="left">n</td>
<td align="right">500.000</td>
</tr>
<tr class="even">
<td align="left">Events</td>
<td align="left">Events</td>
<td align="right">367.000</td>
</tr>
<tr class="odd">
<td align="left">Censoring rate</td>
<td align="left">Censoring rate</td>
<td align="right">0.266</td>
</tr>
<tr class="even">
<td align="left">Mean time</td>
<td align="left">Mean time</td>
<td align="right">5.640</td>
</tr>
<tr class="odd">
<td align="left">Median time</td>
<td align="left">Median time</td>
<td align="right">3.560</td>
</tr>
</tbody>
</table>
<hr />
</div>
</div>
<div id="batch-generation-with-metadata" class="section level1">
<h1>Batch generation with metadata</h1>
<p>For simulation studies, write multiple scenarios and formats
together. The writer creates a <code>manifest.rds</code> with a
<strong>list-column</strong> <code>meta</code> describing each dataset.
The loader reattaches attributes when reading back.</p>
<details class="chunk-details"><summary class="chunk-summary"><span class="chunk-summary-text">Code</span></summary>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">validate_recipe</span>(rec2)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>out_dir <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;rmstss-manifest-demo&quot;</span>)</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="fu">unlink</span>(out_dir, <span class="at">recursive =</span> <span class="cn">TRUE</span>, <span class="at">force =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>man <span class="ot">&lt;-</span> <span class="fu">generate_recipe_sets</span>(</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  <span class="at">base_recipe =</span> base,</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  <span class="at">vary =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">400</span>),</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>              <span class="st">&quot;event_time.effects.treatment&quot;</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.15</span>, <span class="sc">-</span><span class="fl">0.25</span>)),</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  <span class="at">out_dir  =</span> out_dir,</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>  <span class="at">formats  =</span> <span class="fu">c</span>(<span class="st">&quot;rds&quot;</span>,<span class="st">&quot;csv&quot;</span>),</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>  <span class="at">n_reps   =</span> <span class="dv">1</span>,</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>  <span class="at">seed_base =</span> <span class="dv">2025</span></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>)</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="co"># Inspect the first row&#39;s compact metadata (fields only; no file paths)</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">file.path</span>(out_dir, <span class="st">&quot;manifest.rds&quot;</span>))</span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="fu">names</span>(m)</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;scenario_id&quot;</span>                     <span class="st">&quot;rep&quot;</span>                            </span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a> [<span class="dv">3</span>] <span class="st">&quot;seed&quot;</span>                            <span class="st">&quot;achieved_censoring&quot;</span>             </span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a> [<span class="dv">5</span>] <span class="st">&quot;n&quot;</span>                               <span class="st">&quot;file_txt&quot;</span>                       </span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">&quot;file_csv&quot;</span>                        <span class="st">&quot;file_rds&quot;</span>                       </span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a> [<span class="dv">9</span>] <span class="st">&quot;file_rdata&quot;</span>                      <span class="st">&quot;p__n&quot;</span>                           </span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>[<span class="dv">11</span>] <span class="st">&quot;p__event_time.effects.treatment&quot;</span> <span class="st">&quot;meta&quot;</span>                           </span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a><span class="cf">if</span> (<span class="st">&quot;meta&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(m) <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(m<span class="sc">$</span>meta[[<span class="dv">1</span>]]) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">model =</span> m<span class="sc">$</span>meta[[<span class="dv">1</span>]]<span class="sc">$</span>model,</span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>       <span class="at">baseline =</span> m<span class="sc">$</span>meta[[<span class="dv">1</span>]]<span class="sc">$</span>baseline,</span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a>       <span class="at">effects =</span> m<span class="sc">$</span>meta[[<span class="dv">1</span>]]<span class="sc">$</span>effects,</span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>       <span class="at">achieved_censoring =</span> m<span class="sc">$</span>meta[[<span class="dv">1</span>]]<span class="sc">$</span>achieved_censoring,</span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a>       <span class="at">n =</span> m<span class="sc">$</span>meta[[<span class="dv">1</span>]]<span class="sc">$</span>n)</span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a>  <span class="st">&quot;Manifest is minimal (older run); use rebuild_manifest() to enrich.&quot;</span></span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a>}</span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a><span class="sc">$</span>model</span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;aft_weibull&quot;</span></span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a></span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a><span class="sc">$</span>baseline</span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a><span class="sc">$</span>baseline<span class="sc">$</span>shape</span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">1.3</span></span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a><span class="sc">$</span>baseline<span class="sc">$</span>scale</span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">12</span></span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a></span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a></span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a><span class="sc">$</span>effects</span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a><span class="sc">$</span>effects<span class="sc">$</span>intercept</span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">0</span></span>
<span id="cb14-48"><a href="#cb14-48" tabindex="-1"></a></span>
<span id="cb14-49"><a href="#cb14-49" tabindex="-1"></a><span class="sc">$</span>effects<span class="sc">$</span>treatment</span>
<span id="cb14-50"><a href="#cb14-50" tabindex="-1"></a>[<span class="dv">1</span>] <span class="sc">-</span><span class="fl">0.15</span></span>
<span id="cb14-51"><a href="#cb14-51" tabindex="-1"></a></span>
<span id="cb14-52"><a href="#cb14-52" tabindex="-1"></a><span class="sc">$</span>effects<span class="sc">$</span>covariates</span>
<span id="cb14-53"><a href="#cb14-53" tabindex="-1"></a><span class="sc">$</span>effects<span class="sc">$</span>covariates<span class="sc">$</span>age</span>
<span id="cb14-54"><a href="#cb14-54" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.008</span></span>
<span id="cb14-55"><a href="#cb14-55" tabindex="-1"></a></span>
<span id="cb14-56"><a href="#cb14-56" tabindex="-1"></a><span class="sc">$</span>effects<span class="sc">$</span>covariates<span class="sc">$</span>x</span>
<span id="cb14-57"><a href="#cb14-57" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.04</span></span>
<span id="cb14-58"><a href="#cb14-58" tabindex="-1"></a></span>
<span id="cb14-59"><a href="#cb14-59" tabindex="-1"></a></span>
<span id="cb14-60"><a href="#cb14-60" tabindex="-1"></a></span>
<span id="cb14-61"><a href="#cb14-61" tabindex="-1"></a><span class="sc">$</span>achieved_censoring</span>
<span id="cb14-62"><a href="#cb14-62" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.28</span></span>
<span id="cb14-63"><a href="#cb14-63" tabindex="-1"></a></span>
<span id="cb14-64"><a href="#cb14-64" tabindex="-1"></a><span class="sc">$</span>n</span>
<span id="cb14-65"><a href="#cb14-65" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">200</span></span>
<span id="cb14-66"><a href="#cb14-66" tabindex="-1"></a></span>
<span id="cb14-67"><a href="#cb14-67" tabindex="-1"></a><span class="co"># Load datasets back</span></span>
<span id="cb14-68"><a href="#cb14-68" tabindex="-1"></a>sets <span class="ot">&lt;-</span> <span class="fu">load_recipe_sets</span>(<span class="fu">file.path</span>(out_dir, <span class="st">&quot;manifest.rds&quot;</span>))</span>
<span id="cb14-69"><a href="#cb14-69" tabindex="-1"></a><span class="fu">attr</span>(sets[[<span class="dv">1</span>]]<span class="sc">$</span>data, <span class="st">&quot;achieved_censoring&quot;</span>)</span>
<span id="cb14-70"><a href="#cb14-70" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.28</span></span>
<span id="cb14-71"><a href="#cb14-71" tabindex="-1"></a><span class="fu">str</span>(sets[[<span class="dv">1</span>]]<span class="sc">$</span>meta)</span>
<span id="cb14-72"><a href="#cb14-72" tabindex="-1"></a>List of <span class="dv">19</span></span>
<span id="cb14-73"><a href="#cb14-73" tabindex="-1"></a> <span class="sc">$</span> dataset_id        <span class="sc">:</span> chr <span class="st">&quot;sc001_r01&quot;</span></span>
<span id="cb14-74"><a href="#cb14-74" tabindex="-1"></a> <span class="sc">$</span> scenario_id       <span class="sc">:</span> int <span class="dv">1</span></span>
<span id="cb14-75"><a href="#cb14-75" tabindex="-1"></a> <span class="sc">$</span> rep               <span class="sc">:</span> int <span class="dv">1</span></span>
<span id="cb14-76"><a href="#cb14-76" tabindex="-1"></a> <span class="sc">$</span> seed_used         <span class="sc">:</span> int <span class="dv">3026</span></span>
<span id="cb14-77"><a href="#cb14-77" tabindex="-1"></a> <span class="sc">$</span> n                 <span class="sc">:</span> int <span class="dv">200</span></span>
<span id="cb14-78"><a href="#cb14-78" tabindex="-1"></a> <span class="sc">$</span> n_treat           <span class="sc">:</span> int <span class="dv">110</span></span>
<span id="cb14-79"><a href="#cb14-79" tabindex="-1"></a> <span class="sc">$</span> n_control         <span class="sc">:</span> int <span class="dv">90</span></span>
<span id="cb14-80"><a href="#cb14-80" tabindex="-1"></a> <span class="sc">$</span> event_rate        <span class="sc">:</span> num <span class="fl">0.72</span></span>
<span id="cb14-81"><a href="#cb14-81" tabindex="-1"></a> <span class="sc">$</span> achieved_censoring<span class="sc">:</span> num <span class="fl">0.28</span></span>
<span id="cb14-82"><a href="#cb14-82" tabindex="-1"></a> <span class="sc">$</span> model             <span class="sc">:</span> chr <span class="st">&quot;aft_weibull&quot;</span></span>
<span id="cb14-83"><a href="#cb14-83" tabindex="-1"></a> <span class="sc">$</span> baseline          <span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb14-84"><a href="#cb14-84" tabindex="-1"></a>  ..<span class="sc">$</span> shape<span class="sc">:</span> num <span class="fl">1.3</span></span>
<span id="cb14-85"><a href="#cb14-85" tabindex="-1"></a>  ..<span class="sc">$</span> scale<span class="sc">:</span> num <span class="dv">12</span></span>
<span id="cb14-86"><a href="#cb14-86" tabindex="-1"></a> <span class="sc">$</span> effects           <span class="sc">:</span>List of <span class="dv">3</span></span>
<span id="cb14-87"><a href="#cb14-87" tabindex="-1"></a>  ..<span class="sc">$</span> intercept <span class="sc">:</span> num <span class="dv">0</span></span>
<span id="cb14-88"><a href="#cb14-88" tabindex="-1"></a>  ..<span class="sc">$</span> treatment <span class="sc">:</span> num <span class="sc">-</span><span class="fl">0.15</span></span>
<span id="cb14-89"><a href="#cb14-89" tabindex="-1"></a>  ..<span class="sc">$</span> covariates<span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb14-90"><a href="#cb14-90" tabindex="-1"></a>  .. ..<span class="sc">$</span> age<span class="sc">:</span> num <span class="fl">0.008</span></span>
<span id="cb14-91"><a href="#cb14-91" tabindex="-1"></a>  .. ..<span class="sc">$</span> x  <span class="sc">:</span> num <span class="fl">0.04</span></span>
<span id="cb14-92"><a href="#cb14-92" tabindex="-1"></a> <span class="sc">$</span> treatment         <span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb14-93"><a href="#cb14-93" tabindex="-1"></a>  ..<span class="sc">$</span> assignment<span class="sc">:</span> chr <span class="st">&quot;randomization&quot;</span></span>
<span id="cb14-94"><a href="#cb14-94" tabindex="-1"></a>  ..<span class="sc">$</span> allocation<span class="sc">:</span> chr <span class="st">&quot;1:1&quot;</span></span>
<span id="cb14-95"><a href="#cb14-95" tabindex="-1"></a> <span class="sc">$</span> censoring         <span class="sc">:</span>List of <span class="dv">3</span></span>
<span id="cb14-96"><a href="#cb14-96" tabindex="-1"></a>  ..<span class="sc">$</span> mode      <span class="sc">:</span> chr <span class="st">&quot;target_overall&quot;</span></span>
<span id="cb14-97"><a href="#cb14-97" tabindex="-1"></a>  ..<span class="sc">$</span> target    <span class="sc">:</span> num <span class="fl">0.25</span></span>
<span id="cb14-98"><a href="#cb14-98" tabindex="-1"></a>  ..<span class="sc">$</span> admin_time<span class="sc">:</span> num <span class="dv">36</span></span>
<span id="cb14-99"><a href="#cb14-99" tabindex="-1"></a> <span class="sc">$</span> covariates        <span class="sc">:</span>List of <span class="dv">4</span></span>
<span id="cb14-100"><a href="#cb14-100" tabindex="-1"></a>  ..<span class="sc">$</span> <span class="er">:</span>List of <span class="dv">4</span></span>
<span id="cb14-101"><a href="#cb14-101" tabindex="-1"></a>  .. ..<span class="sc">$</span> name  <span class="sc">:</span> chr <span class="st">&quot;age&quot;</span></span>
<span id="cb14-102"><a href="#cb14-102" tabindex="-1"></a>  .. ..<span class="sc">$</span> type  <span class="sc">:</span> chr <span class="st">&quot;continuous&quot;</span></span>
<span id="cb14-103"><a href="#cb14-103" tabindex="-1"></a>  .. ..<span class="sc">$</span> dist  <span class="sc">:</span> chr <span class="st">&quot;normal&quot;</span></span>
<span id="cb14-104"><a href="#cb14-104" tabindex="-1"></a>  .. ..<span class="sc">$</span> params<span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb14-105"><a href="#cb14-105" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> mean<span class="sc">:</span> num <span class="dv">62</span></span>
<span id="cb14-106"><a href="#cb14-106" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> sd  <span class="sc">:</span> num <span class="dv">10</span></span>
<span id="cb14-107"><a href="#cb14-107" tabindex="-1"></a>  ..<span class="sc">$</span> <span class="er">:</span>List of <span class="dv">4</span></span>
<span id="cb14-108"><a href="#cb14-108" tabindex="-1"></a>  .. ..<span class="sc">$</span> name  <span class="sc">:</span> chr <span class="st">&quot;sex&quot;</span></span>
<span id="cb14-109"><a href="#cb14-109" tabindex="-1"></a>  .. ..<span class="sc">$</span> type  <span class="sc">:</span> chr <span class="st">&quot;categorical&quot;</span></span>
<span id="cb14-110"><a href="#cb14-110" tabindex="-1"></a>  .. ..<span class="sc">$</span> dist  <span class="sc">:</span> chr <span class="st">&quot;bernoulli&quot;</span></span>
<span id="cb14-111"><a href="#cb14-111" tabindex="-1"></a>  .. ..<span class="sc">$</span> params<span class="sc">:</span>List of <span class="dv">1</span></span>
<span id="cb14-112"><a href="#cb14-112" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> p<span class="sc">:</span> num <span class="fl">0.45</span></span>
<span id="cb14-113"><a href="#cb14-113" tabindex="-1"></a>  ..<span class="sc">$</span> <span class="er">:</span>List of <span class="dv">4</span></span>
<span id="cb14-114"><a href="#cb14-114" tabindex="-1"></a>  .. ..<span class="sc">$</span> name  <span class="sc">:</span> chr <span class="st">&quot;stage&quot;</span></span>
<span id="cb14-115"><a href="#cb14-115" tabindex="-1"></a>  .. ..<span class="sc">$</span> type  <span class="sc">:</span> chr <span class="st">&quot;categorical&quot;</span></span>
<span id="cb14-116"><a href="#cb14-116" tabindex="-1"></a>  .. ..<span class="sc">$</span> dist  <span class="sc">:</span> chr <span class="st">&quot;ordinal&quot;</span></span>
<span id="cb14-117"><a href="#cb14-117" tabindex="-1"></a>  .. ..<span class="sc">$</span> params<span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb14-118"><a href="#cb14-118" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> prob  <span class="sc">:</span> num [<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="fl">0.3</span> <span class="fl">0.5</span> <span class="fl">0.2</span></span>
<span id="cb14-119"><a href="#cb14-119" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> labels<span class="sc">:</span> chr [<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="st">&quot;I&quot;</span> <span class="st">&quot;II&quot;</span> <span class="st">&quot;III&quot;</span></span>
<span id="cb14-120"><a href="#cb14-120" tabindex="-1"></a>  ..<span class="sc">$</span> <span class="er">:</span>List of <span class="dv">4</span></span>
<span id="cb14-121"><a href="#cb14-121" tabindex="-1"></a>  .. ..<span class="sc">$</span> name  <span class="sc">:</span> chr <span class="st">&quot;x&quot;</span></span>
<span id="cb14-122"><a href="#cb14-122" tabindex="-1"></a>  .. ..<span class="sc">$</span> type  <span class="sc">:</span> chr <span class="st">&quot;continuous&quot;</span></span>
<span id="cb14-123"><a href="#cb14-123" tabindex="-1"></a>  .. ..<span class="sc">$</span> dist  <span class="sc">:</span> chr <span class="st">&quot;lognormal&quot;</span></span>
<span id="cb14-124"><a href="#cb14-124" tabindex="-1"></a>  .. ..<span class="sc">$</span> params<span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb14-125"><a href="#cb14-125" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> meanlog<span class="sc">:</span> num <span class="dv">0</span></span>
<span id="cb14-126"><a href="#cb14-126" tabindex="-1"></a>  .. .. ..<span class="sc">$</span> sdlog  <span class="sc">:</span> num <span class="fl">0.6</span></span>
<span id="cb14-127"><a href="#cb14-127" tabindex="-1"></a> <span class="sc">$</span> allocation        <span class="sc">:</span> chr <span class="st">&quot;1:1&quot;</span></span>
<span id="cb14-128"><a href="#cb14-128" tabindex="-1"></a> <span class="sc">$</span> params            <span class="sc">:</span>List of <span class="dv">2</span></span>
<span id="cb14-129"><a href="#cb14-129" tabindex="-1"></a>  ..<span class="sc">$</span> n                           <span class="sc">:</span> num <span class="dv">200</span></span>
<span id="cb14-130"><a href="#cb14-130" tabindex="-1"></a>  ..<span class="sc">$</span> event_time.effects.treatment<span class="sc">:</span> num <span class="sc">-</span><span class="fl">0.15</span></span>
<span id="cb14-131"><a href="#cb14-131" tabindex="-1"></a> <span class="sc">$</span> files             <span class="sc">:</span>List of <span class="dv">4</span></span>
<span id="cb14-132"><a href="#cb14-132" tabindex="-1"></a>  ..<span class="sc">$</span> txt  <span class="sc">:</span> chr <span class="cn">NA</span></span>
<span id="cb14-133"><a href="#cb14-133" tabindex="-1"></a>  ..<span class="sc">$</span> csv  <span class="sc">:</span> chr <span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">arnab</span><span class="sc">\\</span><span class="st">AppData</span><span class="sc">\\</span><span class="st">Local</span><span class="sc">\\</span><span class="st">Temp</span><span class="sc">\\</span><span class="st">RtmpCW7CwZ/rmstss-manifest-demo/sc1_r1.csv&quot;</span></span>
<span id="cb14-134"><a href="#cb14-134" tabindex="-1"></a>  ..<span class="sc">$</span> rds  <span class="sc">:</span> chr <span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">Users</span><span class="sc">\\</span><span class="st">arnab</span><span class="sc">\\</span><span class="st">AppData</span><span class="sc">\\</span><span class="st">Local</span><span class="sc">\\</span><span class="st">Temp</span><span class="sc">\\</span><span class="st">RtmpCW7CwZ/rmstss-manifest-demo/sc1_r1.rds&quot;</span></span>
<span id="cb14-135"><a href="#cb14-135" tabindex="-1"></a>  ..<span class="sc">$</span> rdata<span class="sc">:</span> chr <span class="cn">NA</span></span>
<span id="cb14-136"><a href="#cb14-136" tabindex="-1"></a> <span class="sc">$</span> created_at        <span class="sc">:</span> chr <span class="st">&quot;2025-09-06 16:17:16.476995&quot;</span></span></code></pre></div>
</details>
<hr />
</div>
<div id="reproducibility-tips" class="section level1">
<h1>Reproducibility tips</h1>
<ul>
<li>Set <code>seed</code> in the recipe or pass <code>seed=</code> to
<code>simulate_from_recipe()</code>.</li>
<li>For grids, fix a deterministic scheme like
<code>seed_base + scenario_id*1000 + rep</code> (this is what
<code>generate_recipe_sets()</code> does).</li>
</ul>
<p>That’s it—you now have the moving parts to define covariates, choose
an event-time engine, specify censoring, simulate data, and (optionally)
batch-create scenarios with compact metadata for downstream
analysis.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
