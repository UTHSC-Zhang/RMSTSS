% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/recipe_sim.R
\name{simulate_from_recipe}
\alias{simulate_from_recipe}
\title{Simulate time-to-event data from a declarative recipe}
\usage{
simulate_from_recipe(recipe, n_override = NULL, seed = NULL)
}
\arguments{
\item{recipe}{A list or YAML/JSON path describing covariates, event_time,
censoring, and treatment blocks (see examples).}

\item{n_override}{Optional integer to override \code{n} in the recipe.}

\item{seed}{Optional RNG seed. If \code{NULL}, uses \code{recipe$seed} when present.}
}
\value{
A \code{data.frame} with survival outcome and covariates.
}
\description{
Generates a dataset with columns \code{time}, \code{status}, \code{arm}, and the
user-defined covariates. The resulting object carries attributes:
\code{attr(dat, "tau")} (analysis truncation) and
\code{attr(dat, "achieved_censoring")} (observed censoring fraction).
}
\section{Schema (minimal)}{

\itemize{
\item \code{n} (int), \code{seed} (optional)
\item \code{covariates.defs}: list of items with \code{name}, \code{type}, \code{dist}, \code{params}, \code{transform} (optional)
\item \code{event_time}: \code{model}, \code{baseline}, \verb{effects\{treatment, covariates\}}, \code{tau}
\item \code{censoring}: \code{mode = target_overall|explicit} (+ parameters)
\item \code{treatment}: \code{assignment = randomization|stratified|logistic_ps} (+ parameters)
}
}

\examples{
set.seed(1)
rec <- list(
  n = 200,
  covariates = list(defs = list(
    list(name="age", type="continuous", dist="normal", params=list(mean=62, sd=10),
         transform=c("center(60)","scale(10)")),
    list(name="gender", type="categorical", dist="bernoulli", params=list(p=0.45))
  )),
  event_time = list(
    model="aft_lognormal",
    baseline=list(mu=3.0, sigma=0.7),
    effects=list(treatment=-0.25, covariates=list(age=0.01, gender=-0.10)),
    tau=24
  ),
  censoring = list(mode="target_overall", target=0.25, admin_time=30),
  treatment = list(assignment="randomization", allocation="1:1")
)
dat <- simulate_from_recipe(rec)
attr(dat, "tau")
attr(dat, "achieved_censoring")
head(dat)

\dontrun{
# YAML round-trip (requires Suggests: yaml)
tmp <- tempfile(fileext = ".yml")
write_recipe_yaml(rec, tmp)
dat2 <- simulate_from_recipe(tmp)
}

}
\seealso{
\\link[=validate_recipe]{validate_recipe}, \\link[=write_recipe_yaml]{write_recipe_yaml}
}
